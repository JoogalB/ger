<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Will you be my Valentine?</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
:root {
  --bg1:#ffd6e7;
  --bg2:#fff0f6;
  --card:#ffffffdd;
  --yes:#ff3b7a;
  --yesHover:#ff1f68;
}

* { box-sizing:border-box; }

body {
  margin:0;
  min-height:100svh;
  display:grid;
  place-items:center;
  background:radial-gradient(circle at top,var(--bg2),var(--bg1));
  font-family:system-ui,-apple-system,sans-serif;
  padding:16px;

  /* FIX: allow vertical scroll */
  overflow-x:hidden;
  overflow-y:auto;
}

#confettiCanvas {
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  pointer-events:none;
  z-index:9999;
}

.card {
  width:min(720px,92vw);
  padding:28px 22px;
  background:var(--card);
  backdrop-filter:blur(12px);
  border-radius:26px;
  text-align:center;
  box-shadow:0 24px 80px rgba(0,0,0,.18);
  animation:float 4s ease-in-out infinite;
}

@keyframes float {
  0%,100% { transform:translateY(0); }
  50% { transform:translateY(-6px); }
}

.art {
  width:min(260px,80vw);
  margin:0 auto 10px;
  display:block;
  filter:drop-shadow(0 14px 18px rgba(0,0,0,.14));
  animation:pulse 2.2s infinite;
}

@keyframes pulse {
  0%,100% { transform:scale(1); }
  50% { transform:scale(1.04); }
}

h1 {
  font-size:clamp(26px,4vw,44px);
  margin:14px 0 18px;
}

.button-zone {
  position:relative;
  width:min(520px,92%);
  height:150px;
  margin:0 auto;
  touch-action:none;
}

button {
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  padding:16px 26px;
  font-size:18px;
  font-weight:800;
  border-radius:999px;
  border:none;
  cursor:pointer;
  box-shadow:0 12px 28px rgba(0,0,0,.16);
  transition:transform .15s ease, background .15s ease;
  -webkit-tap-highlight-color:transparent;
}

#yesBtn {
  left:18%;
  background:var(--yes);
  color:#fff;
}
#yesBtn:hover { background:var(--yesHover); }
#yesBtn:active { transform:translateY(-50%) scale(.96); }

#noBtn {
  left:62%;
  background:#e5e7eb;
  color:#111827;
}

.hint {
  margin-top:12px;
  font-size:13px;
  opacity:.75;
}

.result {
  display:none;
  margin-top:18px;
  animation:pop .35s ease;
}

.result h2 {
  font-size:clamp(30px,4.5vw,46px);
  margin:10px 0;
}

.fireworks {
  width:min(380px,90vw);
  margin:0 auto;
  display:block;
}

@keyframes pop {
  from { transform:scale(.94); opacity:0; }
  to { transform:scale(1); opacity:1; }
}

/* ‚ù§Ô∏è HEART TRAIL */
.heart {
  position:fixed;
  width:14px;
  height:14px;
  pointer-events:none;
  background:radial-gradient(circle at 30% 30%, #ff7aa2, #ff1f68);
  transform:rotate(45deg);
  animation:floatUp 1.2s ease forwards;
  z-index:9998;
}

.heart::before,
.heart::after {
  content:"";
  position:absolute;
  width:14px;
  height:14px;
  background:inherit;
  border-radius:50%;
}

.heart::before { top:-7px; left:0; }
.heart::after { left:-7px; top:0; }

@keyframes floatUp {
  from {
    opacity:1;
    transform:translate(-50%,-50%) scale(1) rotate(45deg);
  }
  to {
    opacity:0;
    transform:translate(-50%,-90px) scale(.4) rotate(45deg);
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation:none !important; transition:none !important; }
  .heart { display:none; }
}
</style>
</head>

<body>
<canvas id="confettiCanvas"></canvas>

<main class="card">
  <!-- Animal + heart -->
  <svg class="art" viewBox="0 0 320 240" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id="fur" x1="0" x2="1">
        <stop offset="0" stop-color="#f7c7a1"/>
        <stop offset="1" stop-color="#f2a97b"/>
      </linearGradient>
      <linearGradient id="heart" x1="0" x2="1">
        <stop offset="0" stop-color="#ff4d7d"/>
        <stop offset="1" stop-color="#ff1f68"/>
      </linearGradient>
    </defs>

    <path d="M250 50 C250 33 270 25 282 38
             C294 25 314 33 314 50
             C314 78 282 92 282 106
             C282 92 250 78 250 50Z"
          fill="url(#heart)"/>

    <path d="M90 120 C90 70 140 40 190 60
             C240 40 290 70 290 120
             C290 180 240 210 190 210
             C140 210 90 180 90 120Z"
          fill="url(#fur)"/>

    <path d="M110 92 L95 55 L140 78 Z" fill="#f2a97b"/>
    <path d="M270 92 L285 55 L240 78 Z" fill="#f2a97b"/>

    <circle cx="160" cy="130" r="8"/>
    <circle cx="220" cy="130" r="8"/>

    <path d="M190 144 C186 144 182 148 182 152
             C182 160 190 164 190 170
             C190 164 198 160 198 152
             C198 148 194 144 190 144Z"
          fill="#ff7aa2"/>
  </svg>

  <h1>Ger, will you please be my valentine?</h1>

  <section class="button-zone" id="zone">
    <button id="yesBtn">Yes üíñ</button>
    <button id="noBtn">No</button>
  </section>

  <div class="hint" id="hint">The ‚ÄúNo‚Äù button seems nervous üòà</div>

  <section class="result" id="result">
    <h2>YAY!!! üíïüéâ</h2>
    <img
      class="fireworks"
      src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeTM3cm9vN2ttZzdhM2V1bmVlM3AybXF2c2tweWJtaWV2enNoa2JkdCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qKQQUKSSbWBkO2V3KX/giphy.gif"
      alt="Fireworks"
    />
  </section>
</main>

<script>
const zone = document.getElementById("zone");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const result = document.getElementById("result");
const hint = document.getElementById("hint");
const canvas = document.getElementById("confettiCanvas");

/* CONFETTI */
function resizeCanvas(){
  const dpr = Math.max(1,devicePixelRatio||1);
  canvas.width = innerWidth*dpr;
  canvas.height = innerHeight*dpr;
}
resizeCanvas();
addEventListener("resize",resizeCanvas);

const confettiFx = confetti.create(canvas,{ resize:false, useWorker:true });

function celebrate(){
  const end = Date.now()+1400;
  (function frame(){
    confettiFx({
      particleCount:10,
      spread:80,
      startVelocity:40,
      origin:{ x:Math.random(), y:Math.random()*0.35 }
    });
    if(Date.now()<end) requestAnimationFrame(frame);
  })();

  setTimeout(()=>confettiFx({
    particleCount:220,
    spread:140,
    startVelocity:55,
    origin:{ x:.5, y:.55 }
  }),300);
}

/* RUNAWAY NO */
let yesScale=1;
function moveNo(x,y){
  const z=zone.getBoundingClientRect();
  const b=noBtn.getBoundingClientRect();
  let dx=(b.left+b.width/2)-x;
  let dy=(b.top+b.height/2)-y;
  const mag=Math.hypot(dx,dy)||1;
  dx/=mag; dy/=mag;

  let left=(b.left-z.left)+dx*160;
  let top=(b.top-z.top)+dy*160;
  left=Math.max(0,Math.min(left,z.width-b.width));
  top=Math.max(0,Math.min(top,z.height-b.height));

  noBtn.style.left=left+"px";
  noBtn.style.top=top+"px";

  yesScale=Math.min(2.2,yesScale+.1);
  yesBtn.style.transform=`translateY(-50%) scale(${yesScale})`;
}

zone.addEventListener("pointermove",e=>{
  const b=noBtn.getBoundingClientRect();
  const d=Math.hypot(
    b.left+b.width/2-e.clientX,
    b.top+b.height/2-e.clientY
  );
  if(d<150) moveNo(e.clientX,e.clientY);
});

/* YES CLICK */
yesBtn.addEventListener("click",()=>{
  zone.style.display="none";
  hint.style.display="none";
  result.style.display="block";
  document.title="She said YES üíñ";
  celebrate();
  navigator.vibrate?.(120);
});

/* ‚ù§Ô∏è HEART TRAIL */
const reduceMotion = matchMedia("(prefers-reduced-motion: reduce)").matches;
let lastHeart=0;

function spawnHeart(x,y){
  const now=performance.now();
  if(now-lastHeart<40) return;
  lastHeart=now;

  const h=document.createElement("div");
  h.className="heart";
  h.style.left=x+"px";
  h.style.top=y+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),1200);
}

if(!reduceMotion){
  document.addEventListener("pointermove",e=>{
    spawnHeart(e.clientX,e.clientY);
  });
}
</script>
</body>
</html>
